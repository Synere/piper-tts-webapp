{% extends "base.html" %}

{% block title %}Piper TTS - Text to Speech{% endblock %}

{% block content %}
<h1>ðŸŽ¤ Piper Text-to-Speech</h1>

<!-- Model Selection -->
<div class="section">
    <h2>1. Select Voice Model</h2>
    
    <div class="form-group">
        <label for="modelSelect">Choose Model:</label>
        <select id="modelSelect">
            <option value="">-- Select a model --</option>
            {% for model in model_files %}
                <option value="{{ model.path }}">
                    {{ model.filename }} ({{ model.size_mb }}MB)
                </option>
            {% endfor %}
        </select>
        <div class="model-info">
            {% if model_files %}
                {{ model_files|length }} model(s) found
            {% else %}
                No models found. Add .onnx files to models/ directory.
            {% endif %}
        </div>
    </div>
    
    <div class="form-group">
        <div class="checkbox-group">
            <input type="checkbox" id="useCuda" checked>
            <label for="useCuda">Enable CUDA (GPU)</label>
        </div>
    </div>
    
    <button id="loadModelBtn" disabled>Load Model</button>
    
    <div id="modelStatus" class="hidden"></div>
</div>

<!-- Text Input -->
<div class="section">
    <h2>2. Enter Text</h2>
    
    <div class="form-group">
        <label for="textInput">Text to Convert:</label>
        <textarea id="textInput" placeholder="Enter text here...">Hello, this is a test of the Piper text-to-speech system.</textarea>
        <div class="model-info">
            Characters: <span id="charCount">0</span>
        </div>
    </div>
    
    <button id="generateBtn" disabled>ðŸ”Š Generate Speech</button>
    
    <div id="generateStatus"></div>
</div>

<!-- Audio Output -->
<div class="section">
    <h2>3. Audio Output</h2>
    
    <div id="audioSection" class="hidden">
        <div class="audio-container">
            <audio id="audioPlayer" controls style="width: 100%;">
                Your browser does not support audio.
            </audio>
            
            <div class="audio-controls">
                <button id="playBtn">Play</button>
                <button id="pauseBtn">Pause</button>
                <button id="downloadBtn">Download</button>
                <button id="regenerateBtn">Regenerate</button>
            </div>
            
            <div class="model-info" id="audioInfo"></div>
        </div>
    </div>
</div>
{% endblock %}